{"version":3,"sources":["../src/app.module.ts"],"sourcesContent":["import {\r\n  MiddlewareConsumer,\r\n  Module,\r\n  NestModule,\r\n  RequestMethod,\r\n} from '@nestjs/common';\r\nimport { AppController } from './controller/app.controller';\r\nimport { AppService } from './service/app.service';\r\nimport { PrismaService } from './service/prisma.service';\r\nimport { AuthController } from './controller/auth.controller';\r\nimport { AuthService } from './service/auth.service';\r\nimport { JwtService } from '@nestjs/jwt';\r\nimport { RedisModule } from '@nestjs-modules/ioredis';\r\nimport { AuthMiddleware } from './middleware/auth.middleware';\r\n\r\n@Module({\r\n  imports: [\r\n    RedisModule.forRoot({\r\n      type: 'single',\r\n      url: process.env.REDIS_URL,\r\n    }),\r\n  ],\r\n  controllers: [AppController, AuthController],\r\n  providers: [AppService, PrismaService, AuthService, JwtService],\r\n})\r\nexport class AppModule implements NestModule {\r\n  configure(consumer: MiddlewareConsumer) {\r\n    consumer\r\n      .apply(AuthMiddleware)\r\n      .exclude(\r\n        { path: '/auth/login', method: RequestMethod.ALL },\r\n        { path: '/auth/redirect', method: RequestMethod.ALL },\r\n        { path: '/auth', method: RequestMethod.ALL },\r\n      )\r\n      .forRoutes({ path: '*', method: RequestMethod.ALL });\r\n  }\r\n}\r\n"],"names":["AppModule","configure","consumer","apply","AuthMiddleware","exclude","path","method","RequestMethod","ALL","forRoutes","imports","RedisModule","forRoot","type","url","process","env","REDIS_URL","controllers","AppController","AuthController","providers","AppService","PrismaService","AuthService","JwtService"],"mappings":";;;;+BAyBaA;;;eAAAA;;;wBApBN;+BACuB;4BACH;+BACG;gCACC;6BACH;qBACD;yBACC;gCACG;;;;;;;AAYxB,IAAA,AAAMA,YAAN,MAAMA;IACXC,UAAUC,QAA4B,EAAE;QACtCA,SACGC,KAAK,CAACC,8BAAc,EACpBC,OAAO,CACN;YAAEC,MAAM;YAAeC,QAAQC,qBAAa,CAACC,GAAG;QAAC,GACjD;YAAEH,MAAM;YAAkBC,QAAQC,qBAAa,CAACC,GAAG;QAAC,GACpD;YAAEH,MAAM;YAASC,QAAQC,qBAAa,CAACC,GAAG;QAAC,GAE5CC,SAAS,CAAC;YAAEJ,MAAM;YAAKC,QAAQC,qBAAa,CAACC,GAAG;QAAC;IACtD;AACF;;;QApBEE,SAAS;YACPC,oBAAW,CAACC,OAAO,CAAC;gBAClBC,MAAM;gBACNC,KAAKC,QAAQC,GAAG,CAACC,SAAS;YAC5B;SACD;QACDC,aAAa;YAACC,4BAAa;YAAEC,8BAAc;SAAC;QAC5CC,WAAW;YAACC,sBAAU;YAAEC,4BAAa;YAAEC,wBAAW;YAAEC,eAAU;SAAC"}